# Configuration

Learn how to configure your SaaS application for development and production environments.

## Environment Variables

Your application uses environment variables to configure various services and features. Here's a comprehensive guide to all available options:

### Core Configuration

```bash
# Application URL (required for auth callbacks)
NEXTAUTH_URL=http://localhost:3000

# Secret for session encryption (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=your_super_secret_key_here
```

### Supabase Configuration

```bash
# Your Supabase project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase anonymous key (safe to expose to client)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key

# Service role key (server-side only, never expose to client)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

### OAuth Providers (Optional)

Configure social authentication providers:

```bash
# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# GitHub OAuth
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
```

## Supabase Setup

### 1. Create a New Project

1. Go to [Supabase Dashboard](https://supabase.com/dashboard)
2. Click "New Project"
3. Choose your organization and set project details
4. Wait for the project to be provisioned

### 2. Get Your Credentials

Navigate to **Settings > API** in your Supabase dashboard to find:

- **Project URL**: Used for `NEXT_PUBLIC_SUPABASE_URL`
- **Project API Keys**:
  - `anon public` key for `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `service_role` key for `SUPABASE_SERVICE_ROLE_KEY`

### 3. Configure Authentication

In your Supabase dashboard, go to **Authentication > Settings**:

#### Site URL Configuration

Add your site URLs:

```
# For development
http://localhost:3000

# For production
https://yourdomain.com
```

#### Redirect URLs

Add these redirect URLs for auth flows:

```
# Development
http://localhost:3000/auth/callback
http://localhost:3000/auth/confirm

# Production
https://yourdomain.com/auth/callback
https://yourdomain.com/auth/confirm
```

## OAuth Provider Setup

### Google OAuth

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select an existing one
3. Enable the Google+ API
4. Go to "Credentials" and create OAuth 2.0 Client IDs
5. Set authorized origins and redirect URIs

**Authorized Origins:**

```
http://localhost:3000
https://yourdomain.com
```

**Authorized Redirect URIs:**

```
https://your-project.supabase.co/auth/v1/callback
```

### GitHub OAuth

1. Go to GitHub Settings > Developer settings > OAuth Apps
2. Click "New OAuth App"
3. Fill in application details

**Authorization callback URL:**

```
https://your-project.supabase.co/auth/v1/callback
```

## Database Configuration

### Running Migrations

If you're starting fresh, you may need to run database migrations:

```bash
# Install Supabase CLI
npm install -g @supabase/cli

# Login to Supabase
supabase login

# Link your project
supabase link --project-ref your-project-ref

# Push migrations
supabase db push
```

### Row Level Security

The starter comes with pre-configured RLS policies. Review them in the Supabase dashboard under **Authentication > Policies**.

## Development vs Production

### Development Environment

Your `.env.local` file should contain:

```bash
NEXTAUTH_URL=http://localhost:3000
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# ... other variables
```

### Production Environment

Set these in your deployment platform (Vercel, Netlify, etc.):

```bash
NEXTAUTH_URL=https://yourdomain.com
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
# ... other variables
```

## Customization Options

### Theme Configuration

Modify your theme in `tailwind.config.js`:

```javascript
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: {
          50: "#eff6ff",
          500: "#3b82f6",
          600: "#2563eb",
          700: "#1d4ed8",
        },
      },
    },
  },
};
```

### App Configuration

Update site-wide settings in `config/config.ts`:

```typescript
export const config = {
  app: {
    name: "Your SaaS App",
    description: "Your app description",
    url: "https://yourdomain.com",
  },
  // ... other settings
};
```

## Security Considerations

> ⚠️ **Important Security Notes**

- Never commit `.env.local` to version control
- Use different database credentials for development and production
- Regularly rotate your `NEXTAUTH_SECRET`
- Keep your service role key secure and never expose it to the client
- Enable 2FA on your Supabase account

## Verification

To verify your configuration is working:

1. Start your development server: `pnpm dev`
2. Navigate to `http://localhost:3000`
3. Try signing up for a new account
4. Check your Supabase dashboard for the new user

If everything is working correctly, you should see the new user in **Authentication > Users**.

## Next Steps

Once your configuration is complete:

- [Take your first steps](/docs/first-steps) with the application
- [Learn about authentication](/docs/auth-overview) flows
- [Set up your database](/docs/database-setup) with custom tables
